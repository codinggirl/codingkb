---
title: å…³äºæ¸è¿›å¼å›¾ç‰‡åŠ è½½çš„å®ç°
created: '2019-09-04T10:36:12.801Z'
modified: '2019-09-04T10:40:17.201Z'
---

# å…³äºæ¸è¿›å¼å›¾ç‰‡åŠ è½½çš„å®ç°

è¿™ç¯‡æ–‡ç« ä¹Ÿå‘åœ¨æˆ‘çš„åšå®¢ï¼Œ[æ¬¢è¿å›´è§‚ğŸ˜„](http://frankzhang.me/archives/177)

Medium.comç”¨æ¥å±•ç¤ºå›¾ç‰‡çš„æŠ€æœ¯ï¼Œå¯ä»¥åœ¨å±•ç¤ºå›¾ç‰‡çš„æ—¶å€™è®©å›¾ç‰‡ä»ä¸€å¼ æ¨¡ç³Šçš„å›¾ç‰‡è¿‡æ¸¡åˆ°ä¸€å¼ æ¸…æ™°çš„å›¾ç‰‡ã€‚

### å¿«é€Ÿå¯¼è¯»

å›¾ç‰‡æ˜¯ç½‘é¡µä¸­æœ€å¤§çš„é™æ€èµ„æºï¼Œä»–ä»¬é€šå¸¸ä¼šå æ®ä¸‰åˆ†ä¹‹äºŒçš„ç©ºé—´ã€‚å›¾ç‰‡ä¼˜åŒ–å’Œé€‰æ‹©æ­£ç¡®çš„å›¾ç‰‡æ ¼å¼æ˜¯è‡³å…³é‡è¦çš„ã€‚å¦å¤–ï¼Œæœ‰äº›ç½‘ç«™ä¼šåœ¨å›¾ç‰‡æ²¡æœ‰åŠ è½½çš„æ—¶å€™ï¼Œä½¿ç”¨å°çš„ç¼©ç•¥å›¾å½“ä½œå ä½ç¬¦ã€‚è¿™ç§æŠ€æœ¯é€šå¸¸ä¹Ÿè¢«ç§°ä½œâ€œ[*blur\-up*](https://link.juejin.im?target=https%3A%2F%2Fcss-tricks.com%2Fthe-blur-up-technique-for-loading-background-images%2F)â€œã€‚è¿™ç§æŠ€æœ¯ä¸»è¦æ˜¯ä¸ºäº†æå‡ç”¨æˆ·æ„ŸçŸ¥æ€§èƒ½ï¼Œå¦‚æœæ­é…æ‡’åŠ è½½ä½¿ç”¨ï¼Œè¿˜å¯ä»¥è¾¾åˆ°èŠ‚çœæµé‡çš„æ•ˆæœã€‚

å½“ç„¶è¿™é¡¹æŠ€æœ¯è¿˜æ˜¯æœ‰å…¶ä»–å¯æ›¿ä»£çš„æŠ€æœ¯çš„ã€‚å…¶ä¸­ä¸€ç§æ˜¯ä½¿ç”¨ä¸€å¼ å•ç‹¬çš„JPEGå›¾ç‰‡ï¼Œè°ƒæ•´å®ƒçš„æ‰«æè„šæœ¬ä½¿å¾—å¯ä»¥å¿«é€Ÿæ¸²æŸ“å‡ºä¸€ä¸ªåŸå§‹çš„åƒç´ åŒ–çš„ç‰ˆæœ¬ï¼Œå¹¶ä¸”åœ¨åç»­æ‰«æä¸­é€æ­¥æ¸²æŸ“å‡ºæœ€ç»ˆæ¸…æ™°çš„å›¾ç‰‡ã€‚æˆ‘æ¨èä½ é€šè¯»[Progressive JPEGs and green Martians](https://link.juejin.im?target=http%3A%2F%2Fcloudinary.com%2Fblog%2Fprogressive_jpegs_and_green_martians) å»æ›´äº†è§£è¿™é¡¹æŠ€æœ¯ã€‚

è¿˜æœ‰ä¸€ç‚¹ï¼Œå¦‚æœä½ å–œæ¬¢å›¾ç‰‡åŠ è½½ä¼˜åŒ–è¿™æ–¹é¢çš„å†…å®¹ï¼Œå¯ä»¥å…³æ³¨[Cloudinaryâ€™s Blog](https://link.juejin.im?target=http%3A%2F%2Fcloudinary.com%2Fblog)ï¼Œé‡Œé¢æœ‰å¾ˆå¤šå…³äºè¿™æ–¹é¢è¯é¢˜çš„åšæ–‡ã€‚

### Quartz

çœ‹ä¸€ä¸‹ä¸‹é¢çš„è¿™ä¸ªè§†é¢‘ï¼Œå®ƒè®°å½•ç€å½“ä½¿ç”¨æ…¢é€Ÿçš„ç½‘ç»œè®¿é—®[QZ.com](https://link.juejin.im?target=https%3A%2F%2Fqz.com%2F894001%2Ftheres-a-wrong-and-a-right-way-to-talk-to-your-dog-according-to-science%2F)çš„ç½‘é¡µæ—¶ï¼ŒQuartz's çš„æ–¹å¼æŒ‰ç…§ä¸‹é¢çš„æ­¥éª¤å®ç°ï¼š

1.  è¯·æ±‚ä¸€ä¸ªå°çš„ç”¨äºè¢«æ¨¡ç³Šçš„`<img />`ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä»–ä»¬ä½¿ç”¨å®½åº¦ä¸º50pxï¼Œè´¨é‡ä¸º80%çš„å›¾ç‰‡ã€‚
2.  é€šè¿‡CSS filteråº”ç”¨æ¨¡ç³Šæ•ˆæœã€‚
3.  è¯·æ±‚ä¸€ä¸ªå¤§çš„å›¾ç‰‡ã€‚

å…³äºQuartzçš„ä¸€ä¸ªæœ‰è¶£çš„åœ°æ–¹åœ¨äºï¼Œä»–ä»¬ä½¿ç”¨å“åº”å¼å›¾ç‰‡çš„è¯­æ³•å»æ ‡è®°æŒ‡å®šå¤§å›¾ç‰‡ã€‚æœ€å¤§çš„ä¸åŒç‚¹åœ¨äºä»–ä»¬ä½¿ç”¨`data-srcset`å±æ€§ï¼Œè¿™æ ·ä»–ä»¬å°±å¯ä»¥æ§åˆ¶ä½•æ—¶å‘èµ·è¯·æ±‚å¹¶ä¸”é˜²æ­¢æµè§ˆå™¨åœ¨æ ‡è®°è¢«è§£æä¹‹åå»è¯·æ±‚å¤§å°ºå¯¸çš„å›¾ç‰‡ã€‚

æˆ‘å‘ç°è¿™ç§æ–¹å¼éå¸¸ä¼˜é›…ï¼Œå› ä¸ºä»–ä»¬å°è¯•éµå¾ªâ€œæ ‡å‡†â€çš„æ–¹å¼å»å¤„ç†å›¾ç‰‡ï¼Œå°±æ˜¯é€šè¿‡å¢åŠ é¢å¤–çš„å­—æ®µä»¥å®ç°æ‡’åŠ è½½å’Œå®ç°è¿‡åº¦åŠ¨ç”»ã€‚

```
<figure class="progressive-image featured-image size-extra-large">

  <picture style="padding-bottom: 56.1875%; background-image: url(https://qzprod.files.wordpress.com/2017/01/fish.jpg?quality=80&strip=all&w=50);">

    <img src="https://qzprod.files.wordpress.com/2017/01/fish.jpg?quality=80&strip=all&w=50">

    <img alt="INDIA-fishermen" />

    <noscript>
      <img src="https://qzprod.files.wordpress.com/2017/01/fish.jpg?quality=80&strip=all&w=320" alt="INDIA-fishermen">
    </noscript>
  </picture>
  <figcaption>...</figcaption>
</figure>
å¤åˆ¶ä»£ç 
```

### Quora

Quoraä¹Ÿæ˜¯åœ¨ä»–ä»¬çš„poæ–‡é‡Œé¢å®ç°äº†å›¾ç‰‡blur\-upæŠ€æœ¯ã€‚ä¾‹å­è¯¦è§[head to this page](https://link.juejin.im?target=https%3A%2F%2Fwww.quora.com%2FHow-does-Quora-pre-load-images)ã€‚

è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å½“æ˜¾ç¤ºæ¨¡ç³Šå ä½å›¾ç‰‡çš„æ—¶å€™é¡µé¢çš„æ ·å­ã€‚

![](https://user-gold-cdn.xitu.io/2018/7/1/164568fe054b58f3?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)

è®©æˆ‘ä»¬æ·±å…¥ä»£ç æ¥çœ‹çœ‹åˆ°åº•æ—¶å¦‚ä½•å®ç°çš„ã€‚é¦–å…ˆï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹HTMLæ ‡è®°ï¼š

```
<div>

    <canvas class="qtext_image_placeholder portrait qtext_image zoomable_in zoomable_in_feed"
        width="499"
        height="874"
        data-src="data:image/PNG;base64,UklGRmgAAABXRUJQVlA4IFwAAADwAQCdASoGAAoAAUAmJYgCdEf/gâ€¦iD0z/yA/5ipcuk5xHSdrS38j8CkH7s+vKeZu9EwRy0f/KPIlo/+UifdfcpiRcJiRnXXAAAAA==">
    </canvas>

    <img src />
</div>
å¤åˆ¶ä»£ç 
```

ä¸ºä»€ä¹ˆåŒæ—¶ä½¿ç”¨`data-src`å’Œ`master-src`ï¼Ÿ`master_src` å›¾ç‰‡æ˜¯å½“ç‚¹å‡»å›¾ç‰‡è·å–æ›´å¤§å°ºå¯¸æ—¶åŠ è½½çš„é‚£å¼ å›¾ç‰‡ã€‚

Quoraæ²¡æœ‰ä½¿ç”¨æ¨¡ç³Šæ•ˆæœã€‚ä»–ä»¬ä½¿ç”¨`canvas.drawImage()`åœ¨canvasé‡Œæ¸²æŸ“å°çš„ç¼©ç•¥å›¾ã€‚ä½ å¯ä»¥çœ‹åˆ°é€šè¿‡æŸ¥çœ‹ä»–ä»¬çš„ä»£ç å‘ç°è¿™ä¸ªæ–¹æ³•ï¼Œåœ¨æ†ç»‘åœ¨ä¸»è¦JSæ–‡ä»¶çš„`shared/lazy_load_images`æ¨¡å—ä¸­å¯ä»¥çœ‹åˆ°ï¼š

```
// draw the data-uri image on the canvas
function a(e) {
    if (e.getAttribute("data-src")) {
        var t = new Image;
        t.src = e.getAttribute("data-src");
        var i = e.getAttribute("width")
          , n = e.getAttribute("height")
          , o = e.getContext("2d");
        t.addEventListener("load", function() {
            o.drawImage(t, 0, 0, i, n)
        }, false)
    }
}
// go through all canvas on the page with a data-src
function r() {
    var e = document.querySelectorAll("canvas[data-src]");
    d.insertionQ("canvas[data-src]").every(function(e) {
        a(e)
    }),
    [].forEach.call(e, a)
}
å¤åˆ¶ä»£ç 
```

ç®€å•æ¥è¯´ï¼ŒQuoraæ‰€ä½¿ç”¨çš„æŠ€æœ¯ä¸»è¦åŒ…æ‹¬ï¼š

1.  åœ¨canvasä¸­æ¸²æŸ“ä¸€ä¸ªå†…è”çš„éå¸¸å°çš„pngã€‚
2.  ä½¿ç”¨Webpï¼ˆå¦‚æœæ”¯æŒçš„è¯ï¼‰æˆ–è€…å…¶ä»–æ ¼å¼è¯·æ±‚å¤§å°ºå¯¸å›¾ç‰‡ã€‚
3.  å°†å¤§å°ºå¯¸å›¾ç‰‡è®¾ç½®ä¸º`<img />`å…ƒç´ çš„èµ„æºï¼Œç„¶åé€æ¸å˜åŒ–å®ƒçš„é€æ˜åº¦å¹¶ä¸”éšè—canvasã€‚

### Clicktorelease

[Clicktorelease.com](https://link.juejin.im?target=https%3A%2F%2Fwww.clicktorelease.com%2F), [@thespite](https://link.juejin.im?target=https%3A%2F%2Ftwitter.com%2Fthespite)ï¼Œåˆšåˆšé‡æ–°è®¾è®¡è¿‡ï¼Œä¹Ÿä¸ºå›¾ç‰‡è®¾ç½®äº†æ‡’åŠ è½½ã€‚

![](https://user-gold-cdn.xitu.io/2018/7/1/164568fdfe593829?imageslim)

è¿™é‡Œæœ€é‡è¦çš„éƒ¨åˆ†æ˜¯ç¼©ç•¥å›¾å¹¶ä¸æ˜¯è¦åŠ è½½çš„å›¾ç‰‡æœ¬èº«ï¼Œè€Œæ˜¯ç¼©ç•¥å›¾[DCTçŸ©é˜µ](https://link.juejin.im?target=https%3A%2F%2Ftwitter.com%2Fthespite%2Fstatus%2F827110706642305024)çš„å€¼ï¼Œè¿™ä½¿å¾—è´Ÿè½½éå¸¸éå¸¸å°ã€‚

åŠ è½½å›¾ç‰‡çš„æ­¥éª¤å…·ä½“å¦‚ä¸‹ï¼š

1.  è¯·æ±‚`thumb-src`å›¾ç‰‡ã€‚è¿™æ˜¯ä¸€ä¸ª16x4çš„PNG ç¼©ç•¥å›¾ï¼Œé€šå¸¸å¤§å°åœ¨300Bå·¦å³ã€‚
2.  åˆ›å»ºä¸€ä¸ª`<canvas />`å¹¶ä¸”åœ¨ä¸Šé¢ç»˜åˆ¶é€šè¿‡åå‘è®¡ç®—ç¼©ç•¥å›¾çš„[DCT](https://link.juejin.im?target=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FDiscrete_cosine_transform)å¾—åˆ°çš„å›¾ç‰‡ã€‚
3.  ä½¿ç”¨`original-src`åœ°å€è¯·æ±‚å¤§å°ºå¯¸çš„å›¾ç‰‡ã€‚å¦‚æœæµè§ˆå™¨æ”¯æŒwebpæ ¼å¼ï¼Œé‚£ä¹ˆâ€œ.webpâ€å°±ä¼šè¢«æ·»åŠ åˆ°srcä¸Šï¼Œè¿™æ ·å°±ä¼šè¯·æ±‚webpæ ¼å¼çš„å›¾ç‰‡ã€‚

åŸå§‹çš„æ ‡è®°å¤§æ¦‚æ˜¯è¿™æ ·çš„:

```
<div>

    <div>

    <div>

        <noscript><img src="/images/graphical-web-2016.jpg"></noscript>
    </div>
</div>
å¤åˆ¶ä»£ç 
```

æˆ‘è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªéå¸¸å¥½å…³äºæ¸è¿›å¢å¼ºçš„ä¾‹å­ï¼Œæä¾›äº†`<noscript>` ä½œä¸ºæ›¿ä»£ï¼Œå¹¶ä¸”é€æ­¥å åŠ æ•ˆæœï¼Œä»ä¸€ä¸ªå›ºå®šçš„èƒŒæ™¯å›¾ç‰‡ï¼Œåˆ°ä¸€ä¸ªæ¨¡ç³Šçš„å›¾ç‰‡ï¼Œå†åˆ°æœ€åçš„æ”¯æŒwebpçš„å¤§å°ºå¯¸çš„å›¾ç‰‡ã€‚

### æ€»ç»“

çœ‹åˆ°å®ç°æ¸è¿›å¼å›¾ç‰‡åŠ è½½çš„è¿™äº›å¾®å°çš„å˜åŒ–éå¸¸æœ‰è¶£ï¼Œå…¶ä¸­æœ‰ä½¿ç”¨Javascriptå®ç°çš„ï¼Œæœ‰åŸºäºå“åº”å¼å›¾ç‰‡å®ç°çš„ï¼Œæœ‰ä½¿ç”¨CSS filterså®ç°çš„ï¼Œè¿˜æœ‰ä½¿ç”¨canvaså®ç°çš„ã€‚

å¦‚æœä½ æƒ³è¦ä¸€ä¸ªåŸºç¡€çš„ä¾‹å­ï¼Œå¯ä»¥ç§»æ­¥[my â€œReproducing Medium loading image effectâ€ pen](https://link.juejin.im?target=http%3A%2F%2Fcodepen.io%2Fjmperez%2Fpen%2FyYjPER)ã€‚å¦‚æœä½ ä¹Ÿçœ‹åˆ°å…¶ä»–çš„ç½‘ç«™å®ç°äº†åŒæ ·çš„æŠ€æœ¯ï¼Œè¯·è®°å¾—ä¸€å®šè¦å‘Šè¯‰æˆ‘ã€‚

### ç›¸å…³å†…å®¹

æˆ‘åœ¨æˆ‘çš„RenderConf 2017çš„æ¼”è®²[Progressive Image Rendering](https://link.juejin.im?target=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DS70xyRYCNdY)ä¸­æ¶‰åŠåˆ°è¿™ä¸ªè¯é¢˜ï¼Œå½“ç„¶è¿™ä¸­é—´è¿˜ä¸€å¹¶æåˆ°å…¶ä»–ä¸€äº›å¯ä»¥ä½¿å¾—å›¾ç‰‡æ›´é«˜æ•ˆåŠ è½½çš„æŠ€æœ¯ã€‚

æˆ‘ä¹Ÿå†™è¿‡å…³äºä½¿ç”¨SVGå»åˆ›å»ºå ä½ç¬¦çš„æ–¹æ³•ï¼Œè¯¦è§[Using SVG as placeholdersâ€Šâ€”â€ŠMore Image Loading Techniques](https://link.juejin.im?target=https%3A%2F%2Fmedium.com%2F%40jmperezperez%2Fusing-svg-as-placeholders-more-image-loading-techniques-bed1b810ab2c)ã€‚


