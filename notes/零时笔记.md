# 王垠博客阅读笔记

别人写的代码，就算它再丑再乱，我也不会乱动它。
代码首要的目标应该是“解决问题”（包括“没有 bug”），其次的目标才是“简单优雅”。
通常我会先“隔离”出很小的一块代码，对它进行重写。随之立即进行大量的测试和试验，找原作者来帮我检查是否有问题，如此反复……
缺乏隔离措施的所谓“开放空间”办公室，并不如传统的单间办公室或者隔离间（cubicle）。编程需要的是独立思考，思考需要集中注意力，很多人思考时甚至不喜欢别人能直接看见自己。没有隔离和隐私措施的办公室，使得员工之间随时都可以互相干扰，难以集中注意力，这对于写出优雅清晰的代码是很不利的。要是遇到那种成天高谈阔论的人在你旁边，那就更倒霉了
提高代码质量唯一可行的手段不是写测试，而是反复的提炼自己的思维，写简单清晰的代码。
“看一个作家的水平，不是看他发表了多少文字，而要看他的废纸篓里扔掉了多少。” 

反复推敲代码
写优雅的代码
写模块化的代码

避免写太长的函数。如果发现函数太大了，就应该把它拆分成几个更小的。

通常我写的函数长度都不超过40行。
一般笔记本电脑屏幕所能容纳的代码行数是50行。
只有40行而不是50行的原因是，我的眼球不转的话，最大的视角只看得到40行代码。

制造小的工具函数。

宏与函数有着巨大的区别，应该尽量避免使用宏。

每个函数只做一件简单的事情
避免使用全局变量和类成员（class member）来传递信息，尽量使用局部变量和参数。

写可读的代码

- 使用有意义的函数和变量名字
- 局部变量应该尽量接近使用它的地方
- 局部变量名字应该简短。
- 不要重用局部变量。
- 把复杂的逻辑提取出去，做成“帮助函数”。
- 把复杂的表达式提取出去，做成中间变量。
- 在合理的地方换行。

写简单的代码

- 免使用自增减表达式（i++，++i，i–，–i）
- 永远不要省略花括号。
- 合理使用括号，不要盲目依赖操作符优先级。
- 避免使用continue和break。

写直观的代码

- 大部分都有两个分支

正确处理错误

正确处理null指针

许多语言（C，C++，Java，C#，……）的类型系统对于null的处理，其实是完全错误的
这些语言的类型系统允许null出现在任何对象（指针）类型可以出现的地方，然而null其实根本不是一个合法的对象。

尽量不要产生null指针。尽量不要用null来初始化变量，函数尽量不要返回null。如果你的函数要返回“没有”，“出错了”之类的结果，尽量使用Java的异常机制。虽


不要把null放进“容器数据结构”里面。

函数调用者：明确理解null所表示的意义，尽早检查和处理null返回值，减少它的传播。

函数作者：明确声明不接受null参数，当参数是null时立即崩溃。

防止过度工程


数学是异常糟糕的语言

没有人会真的欣赏你拍的风景照的
“现场体验”的损失。再好的照片也无法替代真实的世界

1988年出版的《The Design of Everyday Things》

美国小费的普遍性来自于落后的社会关系和严重的贫富分化。中国和英国很少有需要付小费的地方，这是社会制度在某些方面先进的表现。所以没必要在美国餐厅战战兢兢，担心自己“不懂规矩”，或者以此来审视别人。

在心理上，小费应该是一种施舍（不幸的事实），本来是随便给不给都可以的。高兴就多给，不高兴就少给，没必要因为自己或者别人给了多少小费而惊诧。

没有任何人有权利向顾客索取小费，或者直接把小费加到账单上（英国人遇到这种情况会公开的表示鄙视，中国人也应该显示出一点态度）。

根据著名的 Emily Post Etiquette。美国餐厅服务员的小费一般是“税前”金额的 15-20%。很多人计算小费用“税后”的总金额，那是不对的，因为税是给政府的，不属于给餐馆的开销。

对于服务态度不好的餐厅，应该适当减少小费，到10%左右，给2块钱小费，或者干脆不给。

对于快餐店和咖啡店收款处的“小费筒”，大可不必放钱进去。我觉得往里面丢钱是对店员的侮辱。不过如果我用现金，一般会把找回来的硬币顺手丢进去，因为我不喜欢带硬币在身上。

知识其实和金钱一样，是庸俗的东西。

美女如云的地方，美女是出不了名的——天上的云朵有名字吗？

人来到这个世界上，并不是为了给其他人无偿做贡献的。

让每天吃进去的热量比消耗的少一些，但是不至于难受，另外适当运动来增加热量的消耗。

MetaFont Book
MetaPost 

parsing 其实是一个基本不存在的人造问题。它的存在是因为人们的误解，以为程序语言需要有跟人类语言一样的语法，所以把程序语言搞得无端的复杂和困难

一个人的思维方式似乎决定了他设计的所有东西

文学编程（Literate Programming）其实也是多此一举，制造麻烦。文学编程的错误在于认为程序语言应该像人类语言，应该适应所谓的“人类思维”。然而程序语言却是在很多方面高于人类语言的，它不应该受到人类语言里的糟粕的影响。

Unix 的内存管理，进程，线程，shell，进程间通信，文件系统，数据库…… 几乎都是很蹩脚的设计。所谓的“Unix 哲学”，也就是进程间通信主要依靠无结构字符串，造成了一大批过度复杂，毛病众多的工具和语言的产生：AWK，sed，Perl，…… Unix 的内存管理是按“页”而不是按“结构”分配，相当于把内存分配的任务完全推给应用程序。

S 表达式

Lisp Machine 和 Oberon

Multics

人生最重要的事情不是名利，而是找到你愿意合作的人。
我认识的几乎所有程序语言专家几乎都不拿图灵奖当回事，而且其中很多人甚至不拿图灵本人当回事，觉得他设计了一些非常丑陋的东西。

人们在这些大学里的时候都是差不多感受的，可是一旦他们出来了，就会对此绝口不提。自己身上挂着这些学校的镀金牌子，怎么能砸了自己的品牌，长别人的威风？所以每当我批判 Cornell 就有些以前的同学一脸的着急相，好像自己没有吃过那苦头一样。

创造力和孤独几乎是双胞胎。因为免去了跟人讨论的时间，我有了大把的时间来做自己的探索。

美国的权威主义胜于欧洲，但也不是每个人都那么的崇拜权威，而中国才是权威主义的重灾区。

祝你们早日消灭掉心里的各种权威以及对他们的畏惧心理，认识到自己的价值和力量。

